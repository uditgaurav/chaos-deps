FROM alpine:3.20 AS build
RUN apk add --no-cache build-base git musl-dev linux-headers
WORKDIR /src
RUN git clone https://github.com/ColinIanKing/stress-ng.git .
RUN make clean && make STATIC=1 -j"$(nproc)"
RUN mkdir -p /out && cp stress-ng /out/stress-ng
